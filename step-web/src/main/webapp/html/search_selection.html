<div class="modal-header">
	<button id="srchModalBackButton" type="button" style="border:none;float:left;font-size:16px" onclick=step.searchSelect.goBackToPreviousPage()><i class="glyphicon glyphicon-arrow-left"></i></button>
	<span class="pull-right">
        <button type="button" class="close" data-dismiss="modal" onclick=step.util.closeModal("searchSelectionModal")>X</button>
        <span class="pull-right">&nbsp;&nbsp;&nbsp;</span>
        <span id="displayLocForm" class="form-group pull-right hidden-xs" style="font-size:16px">
            <label id="display_result_in" for="displayLocation">Display result in:</label>
            <select type="text" id="displayLocation">
                <option id="current_panel" value="replace">Current panel</option>
                <option id="new_panel" class="hidden-xs" value="new">New panel</option>
            </select>
        </span>
    </span>
</div>
<div id="searchmodalbody" class="modal-body">
  <div id="searchHdrTable"></div>
  <br>
  <div id="previousSearch"></div>
</div>
<div class="footer">
    <br>
	<span id="searchSelectError"></span>
	<button id="updateRangeButton" style="display:none;float:right" type="button" class="stepButton"
	onclick=step.searchSelect._updateRange()></button>
    <button id="updateButton" style="display:none;float:right" type="button" class="stepButton"
    onclick=step.searchSelect.goSearch()></button><br><br><br>
</div>
<script>
    $(document).ready(function () {
        step.searchSelect.initSearchSelection();
    });
	
	function showPreviousSearch() {
		var element = document.getElementById('showprevioussearchonoff');
		if ((element) && (element.checked)) {
			step.searchSelect.includePreviousSearches = true;
			$('#listofprevioussearchs').show();
			var onlyFoundSubjectOrMeaningsSearch = true;
			for (var i = 0; i < step.searchSelect.previousSearchTokens.length; i++) {
				if ((step.searchSelect.previousSearchTokens[i] !== "") &&
					(!step.searchSelect.previousSearchTokens[i].startsWith(MEANINGS)) &&
					(!step.searchSelect.previousSearchTokens[i].startsWith(SUBJECT_SEARCH)))
					onlyFoundSubjectOrMeaningsSearch = false;
			}
			if (onlyFoundSubjectOrMeaningsSearch) $('#searchAndOrNot').hide();
			else $('#searchAndOrNot').show();
			if (step.searchSelect.searchUserInput.length == 0) { 
				if ((step.searchSelect.rangeWasUpdated) || (step.searchSelect.andOrNotUpdated) ||
					(step.searchSelect.numOfPreviousSearchTokens != step.searchSelect.previousSearchTokens.length)) $('#updateButton').show();
			}
			step.searchSelect.handlePreviousSearchAndOrNot();
		}
		else {
			step.searchSelect.includePreviousSearches = false;
			$('#listofprevioussearchs').hide();
			$('#searchAndOrNot').hide();
			$('#updateButton').hide();
			$("#searchResultssubject").show();
			$("#searchResultsmeanings").show();
			$("#searchResultssubjectWarn").hide();
			$("#searchResultsmeaningsWarn").hide();
		}
	}
</script>
