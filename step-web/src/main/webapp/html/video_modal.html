<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal" onclick=closeModal("videoModal")>X</button>
</div>
<div id="videomodalbody" class="modal-body" style="text-align:center;background-color:grey">
<p id="pleasewait">Loading video, please wait...
</div>
<script>
    $(document).ready(function () {
        var file = $('#videoModal').data('videofile');
        var time = $('#videoModal').data('videotime') * 1000;
        var gifElement = document.createElement("img");
        var randomString = "";
        userAgentString = navigator.userAgent;
        if ((userAgentString.indexOf("Safari") > -1) && (userAgentString.indexOf("Chrome") == -1))
            randomString = '?' + performance.now();  // GIF file in the safari browser gets stuck in the last frame after it has played once.
        gifElement.src = "/images/" + file + randomString;
        gifElement.onload = function() {
            $('#pleasewait').remove();
            $('#videomodalbody').append(this);
            console.log('timeout ' + time);
            setTimeout(()=> {
                closeModal('videoModal')
            }, time);
        }
    });

    function closeModal(modalID) {
        var element = document.getElementById(modalID);
		if (element) {	
			$('#' + modalID).modal('hide');
			$('#' + modalID).modal({
				show: false
			});
			element.parentNode.removeChild(element);
		}
    }
</script>
